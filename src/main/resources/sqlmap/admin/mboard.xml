<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin.mboard">

	<!-- ===============================================================
		
		 ============================================================ -->
	<!-- 목록 조회 -->
	<select id="selectMBoardPaging" parameterType="hashmap" resultType="hashmap">
		<include refid="common.pagingPre"/>
			SELECT * /* admin.mboard.selectListPaging */ 
			FROM MBOARD
			WHERE 1=1
			<if test='name != null and !"".equals(name)'> AND NAME LIKE CONCAT('%', #{name}, '%') </if>
			<if test='is_use != null and !"".equals(is_use)'> AND IS_USE = #{is_use} </if>
			<if test='b_idx != null and !"".equals(b_idx)'> AND B_IDX = #{b_idx},'%') </if>
			<if test='c_idx != null and !"".equals(c_idx)'> AND C_IDX = #{c_idx} </if>
			<if test='orderby != null and !"".equals(orderby)'> ORDER BY ${orderby} </if>
		<include refid="common.pagingPost"/>
	</select>
	
	<!--  정보 추가 --><!--
	<insert id="insertMBoard" parameterType="hashmap" useGeneratedKeys="true" keyProperty="AID">
		INSERT INTO	TBL_AD
		(
			ANAME,
			URL,
			TITLE,
			STATUS,
			ORDERING,
			REG_ID
		)
		VALUES
        (
			#{name},
			#{url},
			#{title},
			#{subtitle},
			#{client},
			#{comment},
			#{point},
			#{sdate},
			#{edate},
			#{status},
			#{ordering},
			#{loginid}
        )
	</insert>
	-->
	
	<!--  정보 수정 --><!--
	<update id="updateAd" parameterType="hashmap">
		UPDATE TBL_AD
			SET
				ANAME 		= #{name},
				URL		 	= #{url},
				TITLE		= #{title},
				SUBTITLE	= #{subtitle},
				CLIENT		= #{client},
				COMMENT		= #{comment},
				POINT		= #{point},
				REDIRECT	= #{redirect},
			<if test='imgseq != null and !imgseq.equals("")'>
				IMG_PATH	= #{imgpath},
				IMG_SEQ		= #{imgseq},
			</if>
				CATEGORY	= #{category},
				S_DATE		= #{sdate},
				E_DATE		= #{edate},
				STATUS 		= #{status},
				ORDERING	= #{ordering},
				MOD_DATE 	= NOW()
		WHERE
			AID = #{id}
	</update>
	-->
	
	<!--  정보 삭제 --><!--
	<delete id="deleteAd" parameterType="hashmap">
		DELETE FROM TBL_AD
		WHERE
			AID = #{id}	
	</delete>
	-->
	
	<!-- 선택된  배너 이미지 정보 조회 --><!-- 
	<select id="selectAdBannerAndImg" parameterType="hashmap" resultType="Ad">
		SELECT
			A.BID			AS id,
			A.REG_ID 		AS regid
		FROM
			TBL_AD_BANNER A LEFT JOIN TBL_AD_IMG_FILE B
		WHERE
			A.BID = #{id}
	</select>
	 -->
	
	<!--  배너 정보 추가 --><!-- 
	<insert id="insertAdBanner" parameterType="hashmap" useGeneratedKeys="true" keyProperty="BID">
		INSERT INTO	TBL_AD_BANNER
		(
			BNAME,
			URL,
			CLIENT,
			COMMENT,
			ORDERING,
			REG_ID
		)
		VALUES
        (
			#{name},
			#{url},
			#{client},
			#{comment},
			#{point},
			#{redirect},
			#{status},
			#{ordering},
			#{loginid}
        )
	</insert>
	 -->
	
	<!--  배너 정보 수정 --><!-- 
	<update id="updateAdBanner" parameterType="hashmap">
		UPDATE TBL_AD_BANNER
			SET
				BNAME 		= #{name},
				URL		 	= #{url},
				CLIENT		= #{client},
				COMMENT		= #{comment},
				POINT		= #{point},
				REDIRECT	= #{redirect},
				IMG_URL		= #{imgurl},
			<if test='imgseq != null and !imgseq.equals("")'>
				IMG_PATH	= #{imgpath},
				IMG_SEQ		= #{imgseq},
			</if>
				S_DATE		= #{sdate},
				E_DATE		= #{edate},
				STATUS 		= #{status},
				ORDERING	= #{ordering},
				MOD_DATE 	= NOW()
		WHERE
			BID = #{id}
	</update>
	 -->
	
	
</mapper>